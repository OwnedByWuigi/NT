!include $(GRAPHICS_TST_ROOT)\DirectX\DXGI\DXGI.mk

TARGETNAME=DXGIHybridPresentModern
TARGETTYPE=PROGRAM

C_DEFINES=-DUNICODE -D_UNICODE

_NT_TARGET_VERSION=$(_NT_TARGET_VERSION_WIN8)

UMTYPE=windows
UMENTRY=main

# Dynamic link with C Run time
USE_MSVCRT=1
USE_NATIVE_EH=1
USE_RTTI=1

USE_ATL=1
ATL_VER=70

MUI=0
MUI_COMMENT=NO_LOCALIZATION_NEEDED

MSC_WARNING_LEVEL=/W3
USER_C_FLAGS=$(USER_C_FLAGS) /wd4570 /wd4800 /wd4007 /wd4018 /wd4244 /wd4451 /wd4242

CONSUME_WINRT=1
TEST_CODE=1
#NO_WCHAR_T=1

# STL macros are set by the root DirectX.mk file for all DirectX tests.
# They cannot be set for the FKG compiler.
!UNDEF USE_STL
!UNDEF STL_VER

USE_DEV_FKG=1
OACR_RULES=NewCompiler_testsrc_windowstest

SOURCES=\
    CubeRenderer.cpp \
    Direct3DBase.cpp \
    ModernD3D.cpp \
    DefaultResource.rc # Autogenerated file name + version for Device Guard whitelisting effort

# TODO:  Add this back once the TEST_CODE stuff is fixed
#    kitContent.kml\


INCLUDES=\
    $(SDK_INC_PATH);\

TARGETLIBS=\
           $(SDK_LIB_PATH)\kernel32.lib \
           $(SDK_LIB_PATH)\runtimeobject.lib \
           $(SDK_LIB_PATH)\ole32.lib \
           $(SDK_LIB_PATH)\d3d11.lib \
           $(SDK_LIB_PATH)\d2d1.lib \
           $(SDK_LIB_PATH)\dxgi.lib \
           $(SDK_LIB_PATH)\dwrite.lib \
           $(SDK_LIB_PATH)\dxguid.lib \
           $(SDK_LIB_PATH)\uuid.lib \
           $(SDK_LIB_PATH)\d3dcompiler.lib \

PRECOMPILED_INCLUDE=pch.h
PRECOMPILED_OBJ=pch.obj
PRECOMPILED_CXX=1

NTTARGETFILE0=\
    $(OBJ_PATH)\$(O)\SimplePixelShader.cso \
    $(OBJ_PATH)\$(O)\SimpleVertexShader.cso \

PASS1_BINPLACE=\
    $(OBJ_PATH)\$(O)\SimplePixelShader.cso \
    $(OBJ_PATH)\$(O)\SimpleVertexShader.cso \

PASS_INDEPENDENT_BINPLACE=\
       Assets\*.png \
       *.xml \


# Autogenerated. Sets file name for Device Guard whitelisting effort, used in RC.exe.
C_DEFINES=$(C_DEFINES) -D___TARGETNAME="""$(TARGETNAME).$(TARGETTYPE)"""
MUI_VERIFY_NO_LOC_RESOURCE=1
